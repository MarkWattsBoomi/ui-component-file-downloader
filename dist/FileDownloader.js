!function(t){function e(n){if(o[n])return o[n].exports;var r=o[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var o={};e.m=t,e.c=o,e.d=function(t,o,n){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(t,e){t.exports=React},function(t,e){},function(t,e,o){"use strict";function n(t){for(var o in t)e.hasOwnProperty(o)||(e[o]=t[o])}Object.defineProperty(e,"__esModule",{value:!0}),n(o(3)),n(o(4))},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=o(0);o(1);var i=function(t){function e(e){var o=t.call(this,e)||this;o.componentId="",o.flowKey="",o.attributes={},o.selectedItem=null,o.text="",o.componentId=e.id,o.flowKey=e.flowKey;var n=manywho.model.getComponent(o.props.id,o.props.flowKey);if(n.attributes)for(var r in n.attributes)o.attributes[r]=n.attributes[r];return o}return n(e,t),e.prototype.componentDidMount=function(){this.forceUpdate()},e.prototype.componentDidUpdate=function(){},e.prototype.getAttribute=function(t){return this.attributes[t]?this.attributes[t]:null},e.prototype.render=function(){var t=(manywho.model.getComponent(this.componentId,this.flowKey),manywho.state.getComponent(this.componentId,this.flowKey)),e=t.contentValue,o="data:binary/octet-stream;base64,"+e,n=(this.getAttribute("Title"),this.getAttribute("Icon")||"envelope"),n=this.getAttribute("PointSize")||"48";return n+="pt",r.createElement("div",{className:"file-box"},r.createElement("div",{className:"file-box-body"},r.createElement("a",{download:"firmware",href:o},r.createElement("span",{className:"glyphicon glyphicon-envelope icon-button",title:"Download File"}))))},e}(r.Component);manywho.component.register("FileDownloader",i),e.default=i},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=o(0);o(1);var i=function(t){function e(e){var o=t.call(this,e)||this;o.componentId="",o.flowKey="",o.attributes={},o.selectedItem=null,o.text="",o.componentId=e.id,o.flowKey=e.flowKey;var n=manywho.model.getComponent(o.props.id,o.props.flowKey);if(n.attributes)for(var r in n.attributes)o.attributes[r]=n.attributes[r];return o}return n(e,t),e.prototype.componentDidMount=function(){var t,e=manywho.model.getComponent(this.componentId,this.flowKey),o=manywho.state.getComponent(this.componentId,this.flowKey)||{};if(o.objectData[0]){t=o.objectData[0];t.properties}else t=e.objectData[0];t=JSON.parse(JSON.stringify(t));var n={objectData:[t]};manywho.state.setComponent(this.componentId,n,this.flowKey,!0),this.forceUpdate()},e.prototype.componentDidUpdate=function(){},e.prototype.getAttribute=function(t){return this.attributes[t]?this.attributes[t]:null},e.prototype.render=function(){var t=manywho.model.getComponent(this.componentId,this.flowKey);manywho.state.getComponent(this.componentId,this.flowKey);if(t.objectData&&t.objectData[0])var e=t.objectData[0],o=manywho.utils.getObjectDataProperty(e.properties,"Content").contentValue,n=manywho.utils.getObjectDataProperty(e.properties,"File Name").contentValue,i=(manywho.utils.getObjectDataProperty(e.properties,"Extension").contentValue,manywho.utils.getObjectDataProperty(e.properties,"Size").contentValue,manywho.utils.getObjectDataProperty(e.properties,"MimeType").contentValue,"data:binary/octet-stream;base64,"+o);var a=(this.getAttribute("Title"),this.getAttribute("Icon")||"envelope"),a=this.getAttribute("PointSize")||"48";return a+="pt",r.createElement("div",{className:"file-box"},r.createElement("div",{className:"file-box-body"},r.createElement("a",{download:n,href:i},r.createElement("span",{className:"glyphicon glyphicon-envelope icon-button",title:"Download File"}))))},e}(r.Component);manywho.component.register("FileDownloaderComplex",i),e.default=i}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vRmlsZURvd25sb2FkZXIuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIDhhMjcxMThmMjBjNDQ0YWI3ODYxIiwid2VicGFjazovLy9leHRlcm5hbCBcIlJlYWN0XCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzeCIsIndlYnBhY2s6Ly8vLi9zcmMvRmlsZURvd25sb2FkZXIudHN4Iiwid2VicGFjazovLy8uL3NyYy9GaWxlRG93bmxvYWRlckNvbXBsZXgudHN4Il0sIm5hbWVzIjpbIm1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpbnN0YWxsZWRNb2R1bGVzIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwibiIsIl9fZXNNb2R1bGUiLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJSZWFjdCIsIl9fZXhwb3J0IiwidmFsdWUiLCJfX2V4dGVuZHMiLCJ0aGlzIiwiZXh0ZW5kU3RhdGljcyIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiQXJyYXkiLCJiIiwiX18iLCJjb25zdHJ1Y3RvciIsImNyZWF0ZSIsIkZpbGVEb3dubG9hZGVyIiwiX3N1cGVyIiwicHJvcHMiLCJfdGhpcyIsImNvbXBvbmVudElkIiwiZmxvd0tleSIsImF0dHJpYnV0ZXMiLCJzZWxlY3RlZEl0ZW0iLCJ0ZXh0IiwiaWQiLCJmbG93TW9kZWwiLCJtYW55d2hvIiwibW9kZWwiLCJnZXRDb21wb25lbnQiLCJrZXkiLCJjb21wb25lbnREaWRNb3VudCIsImZvcmNlVXBkYXRlIiwiY29tcG9uZW50RGlkVXBkYXRlIiwiZ2V0QXR0cmlidXRlIiwiYXR0cmlidXRlTmFtZSIsInJlbmRlciIsImZsb3dTdGF0ZSIsInN0YXRlIiwiZmlsZURhdGEiLCJjb250ZW50VmFsdWUiLCJkYXRhVXJpIiwiaWNvbiIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJkb3dubG9hZCIsImhyZWYiLCJ0aXRsZSIsIkNvbXBvbmVudCIsImNvbXBvbmVudCIsInJlZ2lzdGVyIiwiZGVmYXVsdCIsIkZpbGVEb3dubG9hZGVyQ29tcGxleCIsIm9iamVjdERhdGEiLCJwcm9wZXJ0aWVzIiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5IiwibmV3U3RhdGUiLCJzZXRDb21wb25lbnQiLCJ1dGlscyIsImdldE9iamVjdERhdGFQcm9wZXJ0eSIsImZpbGVOYW1lIl0sIm1hcHBpbmdzIjoiQ0FBUyxTQUFVQSxHQ0luQixRQUFBQyxHQUFBQyxHQUdBLEdBQUFDLEVBQUFELEdBQ0EsTUFBQUMsR0FBQUQsR0FBQUUsT0FHQSxJQUFBQyxHQUFBRixFQUFBRCxJQUNBSSxFQUFBSixFQUNBSyxHQUFBLEVBQ0FILFdBVUEsT0FOQUosR0FBQUUsR0FBQU0sS0FBQUgsRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUgsR0FHQUksRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQXZCQSxHQUFBRCxLQTRCQUYsR0FBQVEsRUFBQVQsRUFHQUMsRUFBQVMsRUFBQVAsRUFHQUYsRUFBQVUsRUFBQSxTQUFBUCxFQUFBUSxFQUFBQyxHQUNBWixFQUFBYSxFQUFBVixFQUFBUSxJQUNBRyxPQUFBQyxlQUFBWixFQUFBUSxHQUNBSyxjQUFBLEVBQ0FDLFlBQUEsRUFDQUMsSUFBQU4sS0FNQVosRUFBQW1CLEVBQUEsU0FBQWYsR0FDQSxHQUFBUSxHQUFBUixLQUFBZ0IsV0FDQSxXQUEyQixNQUFBaEIsR0FBQSxTQUMzQixXQUFpQyxNQUFBQSxHQUVqQyxPQURBSixHQUFBVSxFQUFBRSxFQUFBLElBQUFBLEdBQ0FBLEdBSUFaLEVBQUFhLEVBQUEsU0FBQVEsRUFBQUMsR0FBc0QsTUFBQVIsUUFBQVMsVUFBQUMsZUFBQWpCLEtBQUFjLEVBQUFDLElB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QUFZZCxhQUVyRSxtQ0FBcUNELEVBUWhFLElBQ0lHLElBRG1CbkMsS0FBSzJCLGFBQWEsU0FDckIzQixLQUFLMkIsYUFBYSxTQUFXLFlBQzdDUSxFQUFnQm5DLEtBQUsyQixhQUFhLGNBQWdCLElBSXRELE9BSEFRLElBQVEsS0FHRHZDLEVBQUF3QyxjQUFBLE9BQUtDLFVBQVUsWUFDVnpDLEVBQUF3QyxjQUFBLE9BQUtDLFVBQVUsaUJBQ1h6QyxFQUFBd0MsY0FBQSxLQUFHRSxTQUFVaUIsRUFBVWhCLEtBQU1MLEdBQ3pCdEMsRUFBQXdDLGNBQUEsUUFBTUMsVUFBVSwyQ0FBMkNHLE1BQU0sc0JBTzdGSyxHQS9Hb0NqRCxFQUFNNkMsVUFpSDFDckIsU0FBUXNCLFVBQVVDLFNBQVMsd0JBQXlCRSxHQUVwRHpFLEVBQUF3RSxRQUFlQyIsImZpbGUiOiJGaWxlRG93bmxvYWRlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0aTogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9XG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4vKioqKioqLyBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuLyoqKioqKi8gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbi8qKioqKiovIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbi8qKioqKiovIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbi8qKioqKiovIFx0XHRcdH0pO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuLyoqKioqKi8gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4vKioqKioqLyBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuLyoqKioqKi8gXHRcdHJldHVybiBnZXR0ZXI7XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAyKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdDtcblxuLyoqKi8gfSksXG4vKiAxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cbi8qKiovIH0pLFxuLyogMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG5mdW5jdGlvbiBfX2V4cG9ydChtKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XHJcbn1cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5fX2V4cG9ydChfX3dlYnBhY2tfcmVxdWlyZV9fKDMpKTtcclxuX19leHBvcnQoX193ZWJwYWNrX3JlcXVpcmVfXyg0KSk7XHJcblxuXG4vKioqLyB9KSxcbi8qIDMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIFJlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcclxuX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcclxudmFyIEZpbGVEb3dubG9hZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKEZpbGVEb3dubG9hZGVyLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gRmlsZURvd25sb2FkZXIocHJvcHMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5jb21wb25lbnRJZCA9IFwiXCI7XHJcbiAgICAgICAgX3RoaXMuZmxvd0tleSA9IFwiXCI7XHJcbiAgICAgICAgX3RoaXMuYXR0cmlidXRlcyA9IHt9O1xyXG4gICAgICAgIF90aGlzLnNlbGVjdGVkSXRlbSA9IG51bGw7XHJcbiAgICAgICAgX3RoaXMudGV4dCA9IFwiXCI7XHJcbiAgICAgICAgX3RoaXMuY29tcG9uZW50SWQgPSBwcm9wcy5pZDtcclxuICAgICAgICBfdGhpcy5mbG93S2V5ID0gcHJvcHMuZmxvd0tleTtcclxuICAgICAgICAvL3B1c2ggYXR0cmlidXRlcyBpbnRvIGtleWVkIG1hcCBcclxuICAgICAgICB2YXIgZmxvd01vZGVsID0gbWFueXdoby5tb2RlbC5nZXRDb21wb25lbnQoX3RoaXMucHJvcHMuaWQsIF90aGlzLnByb3BzLmZsb3dLZXkpO1xyXG4gICAgICAgIGlmIChmbG93TW9kZWwuYXR0cmlidXRlcykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gZmxvd01vZGVsLmF0dHJpYnV0ZXMpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmF0dHJpYnV0ZXNba2V5XSA9IGZsb3dNb2RlbC5hdHRyaWJ1dGVzW2tleV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgRmlsZURvd25sb2FkZXIucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcclxuICAgIH07XHJcbiAgICBGaWxlRG93bmxvYWRlci5wcm90b3R5cGUuY29tcG9uZW50RGlkVXBkYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgfTtcclxuICAgIEZpbGVEb3dubG9hZGVyLnByb3RvdHlwZS5nZXRBdHRyaWJ1dGUgPSBmdW5jdGlvbiAoYXR0cmlidXRlTmFtZSkge1xyXG4gICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRlc1thdHRyaWJ1dGVOYW1lXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBGaWxlRG93bmxvYWRlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBmbG93TW9kZWwgPSBtYW55d2hvLm1vZGVsLmdldENvbXBvbmVudCh0aGlzLmNvbXBvbmVudElkLCB0aGlzLmZsb3dLZXkpO1xyXG4gICAgICAgIHZhciBmbG93U3RhdGUgPSBtYW55d2hvLnN0YXRlLmdldENvbXBvbmVudCh0aGlzLmNvbXBvbmVudElkLCB0aGlzLmZsb3dLZXkpO1xyXG4gICAgICAgIHZhciBmaWxlRGF0YSA9IGZsb3dTdGF0ZS5jb250ZW50VmFsdWU7XHJcbiAgICAgICAgdmFyIGRhdGFVcmkgPSBcImRhdGE6YmluYXJ5L29jdGV0LXN0cmVhbTtiYXNlNjQsXCIgKyBmaWxlRGF0YTtcclxuICAgICAgICB2YXIgY2FwdGlvbiA9IHRoaXMuZ2V0QXR0cmlidXRlKFwiVGl0bGVcIikgfHwgXCJEb3dubG9hZFwiO1xyXG4gICAgICAgIHZhciBpY29uID0gdGhpcy5nZXRBdHRyaWJ1dGUoXCJJY29uXCIpIHx8IFwiZW52ZWxvcGVcIjtcclxuICAgICAgICB2YXIgaWNvbiA9IHRoaXMuZ2V0QXR0cmlidXRlKFwiUG9pbnRTaXplXCIpIHx8IFwiNDhcIjtcclxuICAgICAgICBpY29uICs9IFwicHRcIjtcclxuICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJmaWxlLWJveFwiIH0sXHJcbiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiZmlsZS1ib3gtYm9keVwiIH0sXHJcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwiYVwiLCB7IGRvd25sb2FkOiBcImZpcm13YXJlXCIsIGhyZWY6IGRhdGFVcmkgfSxcclxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJnbHlwaGljb24gZ2x5cGhpY29uLWVudmVsb3BlIGljb24tYnV0dG9uXCIsIHRpdGxlOiBcIkRvd25sb2FkIEZpbGVcIiB9KSkpKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRmlsZURvd25sb2FkZXI7XHJcbn0oUmVhY3QuQ29tcG9uZW50KSk7XHJcbm1hbnl3aG8uY29tcG9uZW50LnJlZ2lzdGVyKCdGaWxlRG93bmxvYWRlcicsIEZpbGVEb3dubG9hZGVyKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gRmlsZURvd25sb2FkZXI7XHJcblxuXG4vKioqLyB9KSxcbi8qIDQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIFJlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcclxuX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcclxudmFyIEZpbGVEb3dubG9hZGVyQ29tcGxleCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhGaWxlRG93bmxvYWRlckNvbXBsZXgsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBGaWxlRG93bmxvYWRlckNvbXBsZXgocHJvcHMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5jb21wb25lbnRJZCA9IFwiXCI7XHJcbiAgICAgICAgX3RoaXMuZmxvd0tleSA9IFwiXCI7XHJcbiAgICAgICAgX3RoaXMuYXR0cmlidXRlcyA9IHt9O1xyXG4gICAgICAgIF90aGlzLnNlbGVjdGVkSXRlbSA9IG51bGw7XHJcbiAgICAgICAgX3RoaXMudGV4dCA9IFwiXCI7XHJcbiAgICAgICAgX3RoaXMuY29tcG9uZW50SWQgPSBwcm9wcy5pZDtcclxuICAgICAgICBfdGhpcy5mbG93S2V5ID0gcHJvcHMuZmxvd0tleTtcclxuICAgICAgICAvL3B1c2ggYXR0cmlidXRlcyBpbnRvIGtleWVkIG1hcCBcclxuICAgICAgICB2YXIgZmxvd01vZGVsID0gbWFueXdoby5tb2RlbC5nZXRDb21wb25lbnQoX3RoaXMucHJvcHMuaWQsIF90aGlzLnByb3BzLmZsb3dLZXkpO1xyXG4gICAgICAgIGlmIChmbG93TW9kZWwuYXR0cmlidXRlcykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gZmxvd01vZGVsLmF0dHJpYnV0ZXMpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmF0dHJpYnV0ZXNba2V5XSA9IGZsb3dNb2RlbC5hdHRyaWJ1dGVzW2tleV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgRmlsZURvd25sb2FkZXJDb21wbGV4LnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL2NvcHkgdGhlIG1vZGVsIHRvIHRoZSBzdGF0ZVxyXG4gICAgICAgIHZhciBmbG93TW9kZWwgPSBtYW55d2hvLm1vZGVsLmdldENvbXBvbmVudCh0aGlzLmNvbXBvbmVudElkLCB0aGlzLmZsb3dLZXkpO1xyXG4gICAgICAgIHZhciBmbG93U3RhdGUgPSBtYW55d2hvLnN0YXRlLmdldENvbXBvbmVudCh0aGlzLmNvbXBvbmVudElkLCB0aGlzLmZsb3dLZXkpIHx8IHt9O1xyXG4gICAgICAgIHZhciBvYmplY3REYXRhO1xyXG4gICAgICAgIGlmIChmbG93U3RhdGUub2JqZWN0RGF0YVswXSkge1xyXG4gICAgICAgICAgICBvYmplY3REYXRhID0gZmxvd1N0YXRlLm9iamVjdERhdGFbMF07XHJcbiAgICAgICAgICAgIHZhciBwcm9wcyA9IG9iamVjdERhdGEucHJvcGVydGllcztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG9iamVjdERhdGEgPSBmbG93TW9kZWwub2JqZWN0RGF0YVswXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgb2JqZWN0RGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2JqZWN0RGF0YSkpO1xyXG4gICAgICAgIHZhciBuZXdTdGF0ZSA9IHtcclxuICAgICAgICAgICAgb2JqZWN0RGF0YTogW29iamVjdERhdGFdXHJcbiAgICAgICAgfTtcclxuICAgICAgICBtYW55d2hvLnN0YXRlLnNldENvbXBvbmVudCh0aGlzLmNvbXBvbmVudElkLCBuZXdTdGF0ZSwgdGhpcy5mbG93S2V5LCB0cnVlKTtcclxuICAgICAgICB0aGlzLmZvcmNlVXBkYXRlKCk7XHJcbiAgICB9O1xyXG4gICAgRmlsZURvd25sb2FkZXJDb21wbGV4LnByb3RvdHlwZS5jb21wb25lbnREaWRVcGRhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB9O1xyXG4gICAgRmlsZURvd25sb2FkZXJDb21wbGV4LnByb3RvdHlwZS5nZXRBdHRyaWJ1dGUgPSBmdW5jdGlvbiAoYXR0cmlidXRlTmFtZSkge1xyXG4gICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRlc1thdHRyaWJ1dGVOYW1lXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBGaWxlRG93bmxvYWRlckNvbXBsZXgucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZmxvd01vZGVsID0gbWFueXdoby5tb2RlbC5nZXRDb21wb25lbnQodGhpcy5jb21wb25lbnRJZCwgdGhpcy5mbG93S2V5KTtcclxuICAgICAgICB2YXIgZmxvd1N0YXRlID0gbWFueXdoby5zdGF0ZS5nZXRDb21wb25lbnQodGhpcy5jb21wb25lbnRJZCwgdGhpcy5mbG93S2V5KTtcclxuICAgICAgICBpZiAoZmxvd01vZGVsLm9iamVjdERhdGEgJiYgZmxvd01vZGVsLm9iamVjdERhdGFbMF0pIHtcclxuICAgICAgICAgICAgdmFyIG9iamVjdERhdGEgPSBmbG93TW9kZWwub2JqZWN0RGF0YVswXTtcclxuICAgICAgICAgICAgdmFyIGZpbGVEYXRhID0gbWFueXdoby51dGlscy5nZXRPYmplY3REYXRhUHJvcGVydHkob2JqZWN0RGF0YS5wcm9wZXJ0aWVzLCBcIkNvbnRlbnRcIikuY29udGVudFZhbHVlO1xyXG4gICAgICAgICAgICB2YXIgZmlsZU5hbWUgPSBtYW55d2hvLnV0aWxzLmdldE9iamVjdERhdGFQcm9wZXJ0eShvYmplY3REYXRhLnByb3BlcnRpZXMsIFwiRmlsZSBOYW1lXCIpLmNvbnRlbnRWYWx1ZTtcclxuICAgICAgICAgICAgdmFyIGV4dGVuc2lvbiA9IG1hbnl3aG8udXRpbHMuZ2V0T2JqZWN0RGF0YVByb3BlcnR5KG9iamVjdERhdGEucHJvcGVydGllcywgXCJFeHRlbnNpb25cIikuY29udGVudFZhbHVlO1xyXG4gICAgICAgICAgICB2YXIgc2l6ZSA9IG1hbnl3aG8udXRpbHMuZ2V0T2JqZWN0RGF0YVByb3BlcnR5KG9iamVjdERhdGEucHJvcGVydGllcywgXCJTaXplXCIpLmNvbnRlbnRWYWx1ZTtcclxuICAgICAgICAgICAgdmFyIG1pbWVUeXBlID0gbWFueXdoby51dGlscy5nZXRPYmplY3REYXRhUHJvcGVydHkob2JqZWN0RGF0YS5wcm9wZXJ0aWVzLCBcIk1pbWVUeXBlXCIpLmNvbnRlbnRWYWx1ZTtcclxuICAgICAgICAgICAgdmFyIGRhdGFVcmkgPSBcImRhdGE6YmluYXJ5L29jdGV0LXN0cmVhbTtiYXNlNjQsXCIgKyBmaWxlRGF0YTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGNhcHRpb24gPSB0aGlzLmdldEF0dHJpYnV0ZShcIlRpdGxlXCIpIHx8IFwiRG93bmxvYWRcIjtcclxuICAgICAgICB2YXIgaWNvbiA9IHRoaXMuZ2V0QXR0cmlidXRlKFwiSWNvblwiKSB8fCBcImVudmVsb3BlXCI7XHJcbiAgICAgICAgdmFyIGljb24gPSB0aGlzLmdldEF0dHJpYnV0ZShcIlBvaW50U2l6ZVwiKSB8fCBcIjQ4XCI7XHJcbiAgICAgICAgaWNvbiArPSBcInB0XCI7XHJcbiAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiZmlsZS1ib3hcIiB9LFxyXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImZpbGUtYm94LWJvZHlcIiB9LFxyXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImFcIiwgeyBkb3dubG9hZDogZmlsZU5hbWUsIGhyZWY6IGRhdGFVcmkgfSxcclxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJnbHlwaGljb24gZ2x5cGhpY29uLWVudmVsb3BlIGljb24tYnV0dG9uXCIsIHRpdGxlOiBcIkRvd25sb2FkIEZpbGVcIiB9KSkpKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRmlsZURvd25sb2FkZXJDb21wbGV4O1xyXG59KFJlYWN0LkNvbXBvbmVudCkpO1xyXG5tYW55d2hvLmNvbXBvbmVudC5yZWdpc3RlcignRmlsZURvd25sb2FkZXJDb21wbGV4JywgRmlsZURvd25sb2FkZXJDb21wbGV4KTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gRmlsZURvd25sb2FkZXJDb21wbGV4O1xyXG5cblxuLyoqKi8gfSlcbi8qKioqKiovIF0pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBGaWxlRG93bmxvYWRlci5qcyIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDIpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIDhhMjcxMThmMjBjNDQ0YWI3ODYxIiwibW9kdWxlLmV4cG9ydHMgPSBSZWFjdDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIlJlYWN0XCJcbi8vIG1vZHVsZSBpZCA9IDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZXhwb3J0ICogZnJvbSAnLi9GaWxlRG93bmxvYWRlcic7XG5leHBvcnQgKiBmcm9tICcuL0ZpbGVEb3dubG9hZGVyQ29tcGxleCc7XG5cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9pbmRleC50c3giLCJcclxuZGVjbGFyZSB2YXIgbWFueXdobzogYW55O1xyXG5cclxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgJy4vRmlsZURvd25sb2FkZXIuY3NzJztcclxuXHJcbmNsYXNzIEZpbGVEb3dubG9hZGVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PGFueSwgYW55PiBcclxueyAgIFxyXG4gICAgY29tcG9uZW50SWQ6IHN0cmluZyA9IFwiXCI7XHJcbiAgICBmbG93S2V5OiBzdHJpbmcgPVwiXCI7ICAgIFxyXG4gICAgYXR0cmlidXRlcyA6IGFueSA9IHt9O1xyXG4gICAgc2VsZWN0ZWRJdGVtOiBzdHJpbmcgPSBudWxsO1xyXG5cclxuICAgIHRleHQgOiBzdHJpbmcgPSBcIlwiO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByb3BzIDogYW55KVxyXG5cdHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5jb21wb25lbnRJZCA9IHByb3BzLmlkO1xyXG4gICAgICAgIHRoaXMuZmxvd0tleSA9IHByb3BzLmZsb3dLZXk7XHJcblxyXG4gICAgICAgIC8vcHVzaCBhdHRyaWJ1dGVzIGludG8ga2V5ZWQgbWFwIFxyXG5cdFx0dmFyIGZsb3dNb2RlbCA9IG1hbnl3aG8ubW9kZWwuZ2V0Q29tcG9uZW50KHRoaXMucHJvcHMuaWQsICAgdGhpcy5wcm9wcy5mbG93S2V5KTtcclxuXHRcdGlmKGZsb3dNb2RlbC5hdHRyaWJ1dGVzKVxyXG5cdFx0e1xyXG5cdFx0XHRmb3IodmFyIGtleSBpbiBmbG93TW9kZWwuYXR0cmlidXRlcylcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHRoaXMuYXR0cmlidXRlc1trZXldID0gZmxvd01vZGVsLmF0dHJpYnV0ZXNba2V5XTtcclxuXHRcdFx0fVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBcclxuICAgIGNvbXBvbmVudERpZE1vdW50KCkgXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5mb3JjZVVwZGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudERpZFVwZGF0ZSgpXHJcbiAgICB7XHJcblxyXG4gICAgfVxyXG5cclxuXHRnZXRBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSA6IHN0cmluZylcclxuXHR7XHJcblx0XHRpZih0aGlzLmF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV0pXHJcblx0XHR7XHJcblx0XHRcdHJldHVybiB0aGlzLmF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV07XHJcblx0XHR9XHJcblx0XHRlbHNlXHJcblx0XHR7XHJcblx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcbiAgICAgICBcclxuICAgIHJlbmRlcigpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgZmxvd01vZGVsID0gbWFueXdoby5tb2RlbC5nZXRDb21wb25lbnQodGhpcy5jb21wb25lbnRJZCwgICB0aGlzLmZsb3dLZXkpO1xyXG4gICAgICAgIGNvbnN0IGZsb3dTdGF0ZSA9IG1hbnl3aG8uc3RhdGUuZ2V0Q29tcG9uZW50KHRoaXMuY29tcG9uZW50SWQsICAgdGhpcy5mbG93S2V5KTtcclxuXHJcbiAgICAgICAgdmFyIGZpbGVEYXRhIDogYW55ID0gZmxvd1N0YXRlLmNvbnRlbnRWYWx1ZTtcclxuXHJcbiAgICAgICAgdmFyIGRhdGFVcmkgOiBzdHJpbmcgPSBcImRhdGE6YmluYXJ5L29jdGV0LXN0cmVhbTtiYXNlNjQsXCIgKyBmaWxlRGF0YTtcclxuXHJcbiAgICAgICAgdmFyIGNhcHRpb24gOiBzdHJpbmcgPSB0aGlzLmdldEF0dHJpYnV0ZShcIlRpdGxlXCIpIHx8IFwiRG93bmxvYWRcIjtcclxuICAgICAgICB2YXIgaWNvbiA6IHN0cmluZyA9IHRoaXMuZ2V0QXR0cmlidXRlKFwiSWNvblwiKSB8fCBcImVudmVsb3BlXCI7XHJcbiAgICAgICAgdmFyIGljb24gOiBzdHJpbmcgPSB0aGlzLmdldEF0dHJpYnV0ZShcIlBvaW50U2l6ZVwiKSB8fCBcIjQ4XCI7XHJcbiAgICAgICAgaWNvbiArPSBcInB0XCI7XHJcbiAgICAgICBcclxuXHJcbiAgICAgICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwiZmlsZS1ib3hcIiAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmlsZS1ib3gtYm9keVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBkb3dubG9hZD1cImZpcm13YXJlXCIgaHJlZj17ZGF0YVVyaX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJnbHlwaGljb24gZ2x5cGhpY29uLWVudmVsb3BlIGljb24tYnV0dG9uXCIgdGl0bGU9XCJEb3dubG9hZCBGaWxlXCI+PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgfVxyXG5cclxuICAgIFxyXG59XHJcblxyXG5tYW55d2hvLmNvbXBvbmVudC5yZWdpc3RlcignRmlsZURvd25sb2FkZXInLCBGaWxlRG93bmxvYWRlcik7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGaWxlRG93bmxvYWRlcjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvRmlsZURvd25sb2FkZXIudHN4IiwiXHJcbmRlY2xhcmUgdmFyIG1hbnl3aG86IGFueTtcclxuXHJcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0ICcuL0ZpbGVEb3dubG9hZGVyLmNzcyc7XHJcblxyXG5jbGFzcyBGaWxlRG93bmxvYWRlckNvbXBsZXggZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8YW55LCBhbnk+IFxyXG57ICAgXHJcbiAgICBjb21wb25lbnRJZDogc3RyaW5nID0gXCJcIjtcclxuICAgIGZsb3dLZXk6IHN0cmluZyA9XCJcIjsgICAgXHJcbiAgICBhdHRyaWJ1dGVzIDogYW55ID0ge307XHJcbiAgICBzZWxlY3RlZEl0ZW06IHN0cmluZyA9IG51bGw7XHJcblxyXG4gICAgdGV4dCA6IHN0cmluZyA9IFwiXCI7XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJvcHMgOiBhbnkpXHJcblx0e1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmNvbXBvbmVudElkID0gcHJvcHMuaWQ7XHJcbiAgICAgICAgdGhpcy5mbG93S2V5ID0gcHJvcHMuZmxvd0tleTtcclxuXHJcbiAgICAgICAgLy9wdXNoIGF0dHJpYnV0ZXMgaW50byBrZXllZCBtYXAgXHJcblx0XHR2YXIgZmxvd01vZGVsID0gbWFueXdoby5tb2RlbC5nZXRDb21wb25lbnQodGhpcy5wcm9wcy5pZCwgICB0aGlzLnByb3BzLmZsb3dLZXkpO1xyXG5cdFx0aWYoZmxvd01vZGVsLmF0dHJpYnV0ZXMpXHJcblx0XHR7XHJcblx0XHRcdGZvcih2YXIga2V5IGluIGZsb3dNb2RlbC5hdHRyaWJ1dGVzKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0dGhpcy5hdHRyaWJ1dGVzW2tleV0gPSBmbG93TW9kZWwuYXR0cmlidXRlc1trZXldO1xyXG5cdFx0XHR9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIFxyXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSBcclxuICAgIHtcclxuICAgICAgICAvL2NvcHkgdGhlIG1vZGVsIHRvIHRoZSBzdGF0ZVxyXG4gICAgICAgIGNvbnN0IGZsb3dNb2RlbCA9IG1hbnl3aG8ubW9kZWwuZ2V0Q29tcG9uZW50KHRoaXMuY29tcG9uZW50SWQsICAgdGhpcy5mbG93S2V5KTtcclxuICAgICAgICBjb25zdCBmbG93U3RhdGUgPSBtYW55d2hvLnN0YXRlLmdldENvbXBvbmVudCh0aGlzLmNvbXBvbmVudElkLCB0aGlzLmZsb3dLZXkpIHx8IHt9O1xyXG5cclxuICAgICAgICB2YXIgb2JqZWN0RGF0YSA6IGFueTtcclxuICAgICAgICBpZihmbG93U3RhdGUub2JqZWN0RGF0YVswXSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG9iamVjdERhdGE9Zmxvd1N0YXRlLm9iamVjdERhdGFbMF07XHJcbiAgICAgICAgICAgIHZhciBwcm9wcyA9IG9iamVjdERhdGEucHJvcGVydGllcztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgb2JqZWN0RGF0YT1mbG93TW9kZWwub2JqZWN0RGF0YVswXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG9iamVjdERhdGEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iamVjdERhdGEpKTtcclxuICAgICAgICBcclxuICAgICAgICB2YXIgbmV3U3RhdGUgPSB7XHJcblx0XHRcdG9iamVjdERhdGE6IFtvYmplY3REYXRhXVxyXG5cdFx0fTtcclxuICAgICAgICAgICAgIFxyXG4gICAgICAgIG1hbnl3aG8uc3RhdGUuc2V0Q29tcG9uZW50KHRoaXMuY29tcG9uZW50SWQsIG5ld1N0YXRlLCB0aGlzLmZsb3dLZXksIHRydWUpO1xyXG4gICAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnREaWRVcGRhdGUoKVxyXG4gICAge1xyXG5cclxuICAgIH1cclxuXHJcblx0Z2V0QXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUgOiBzdHJpbmcpXHJcblx0e1xyXG5cdFx0aWYodGhpcy5hdHRyaWJ1dGVzW2F0dHJpYnV0ZU5hbWVdKVxyXG5cdFx0e1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5hdHRyaWJ1dGVzW2F0dHJpYnV0ZU5hbWVdO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZVxyXG5cdFx0e1xyXG5cdFx0XHRyZXR1cm4gbnVsbDtcclxuXHRcdH1cclxuXHR9XHJcblxyXG4gICAgICAgXHJcbiAgICByZW5kZXIoKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IGZsb3dNb2RlbCA9IG1hbnl3aG8ubW9kZWwuZ2V0Q29tcG9uZW50KHRoaXMuY29tcG9uZW50SWQsICAgdGhpcy5mbG93S2V5KTtcclxuICAgICAgICBjb25zdCBmbG93U3RhdGUgPSBtYW55d2hvLnN0YXRlLmdldENvbXBvbmVudCh0aGlzLmNvbXBvbmVudElkLCAgIHRoaXMuZmxvd0tleSk7XHJcblxyXG4gICAgICAgIGlmKGZsb3dNb2RlbC5vYmplY3REYXRhICYmIGZsb3dNb2RlbC5vYmplY3REYXRhWzBdKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG9iamVjdERhdGEgPSBmbG93TW9kZWwub2JqZWN0RGF0YVswXTtcclxuICAgICAgICAgICAgdmFyIGZpbGVEYXRhIDogYW55ID0gbWFueXdoby51dGlscy5nZXRPYmplY3REYXRhUHJvcGVydHkob2JqZWN0RGF0YS5wcm9wZXJ0aWVzLCBcIkNvbnRlbnRcIikuY29udGVudFZhbHVlO1xyXG4gICAgICAgICAgICB2YXIgZmlsZU5hbWUgOiBhbnkgPSBtYW55d2hvLnV0aWxzLmdldE9iamVjdERhdGFQcm9wZXJ0eShvYmplY3REYXRhLnByb3BlcnRpZXMsIFwiRmlsZSBOYW1lXCIpLmNvbnRlbnRWYWx1ZTtcclxuICAgICAgICAgICAgdmFyIGV4dGVuc2lvbiA6IGFueSA9IG1hbnl3aG8udXRpbHMuZ2V0T2JqZWN0RGF0YVByb3BlcnR5KG9iamVjdERhdGEucHJvcGVydGllcywgXCJFeHRlbnNpb25cIikuY29udGVudFZhbHVlO1xyXG4gICAgICAgICAgICB2YXIgc2l6ZSA6IGFueSA9IG1hbnl3aG8udXRpbHMuZ2V0T2JqZWN0RGF0YVByb3BlcnR5KG9iamVjdERhdGEucHJvcGVydGllcywgXCJTaXplXCIpLmNvbnRlbnRWYWx1ZTtcclxuICAgICAgICAgICAgdmFyIG1pbWVUeXBlIDogYW55ID0gbWFueXdoby51dGlscy5nZXRPYmplY3REYXRhUHJvcGVydHkob2JqZWN0RGF0YS5wcm9wZXJ0aWVzLCBcIk1pbWVUeXBlXCIpLmNvbnRlbnRWYWx1ZTtcclxuICAgICAgICBcclxuICAgICAgICAgICAgdmFyIGRhdGFVcmkgOiBzdHJpbmcgPSBcImRhdGE6YmluYXJ5L29jdGV0LXN0cmVhbTtiYXNlNjQsXCIgKyBmaWxlRGF0YTtcclxuICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFxyXG5cclxuICAgICAgICBcclxuXHJcbiAgICAgICAgdmFyIGNhcHRpb24gOiBzdHJpbmcgPSB0aGlzLmdldEF0dHJpYnV0ZShcIlRpdGxlXCIpIHx8IFwiRG93bmxvYWRcIjtcclxuICAgICAgICB2YXIgaWNvbiA6IHN0cmluZyA9IHRoaXMuZ2V0QXR0cmlidXRlKFwiSWNvblwiKSB8fCBcImVudmVsb3BlXCI7XHJcbiAgICAgICAgdmFyIGljb24gOiBzdHJpbmcgPSB0aGlzLmdldEF0dHJpYnV0ZShcIlBvaW50U2l6ZVwiKSB8fCBcIjQ4XCI7XHJcbiAgICAgICAgaWNvbiArPSBcInB0XCI7XHJcbiAgICAgICBcclxuXHJcbiAgICAgICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwiZmlsZS1ib3hcIiAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmlsZS1ib3gtYm9keVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBkb3dubG9hZD17ZmlsZU5hbWV9IGhyZWY9e2RhdGFVcml9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1lbnZlbG9wZSBpY29uLWJ1dHRvblwiIHRpdGxlPVwiRG93bmxvYWQgRmlsZVwiPjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgIH1cclxuXHJcbiAgICBcclxufVxyXG5cclxubWFueXdoby5jb21wb25lbnQucmVnaXN0ZXIoJ0ZpbGVEb3dubG9hZGVyQ29tcGxleCcsIEZpbGVEb3dubG9hZGVyQ29tcGxleCk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGaWxlRG93bmxvYWRlckNvbXBsZXg7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL0ZpbGVEb3dubG9hZGVyQ29tcGxleC50c3giXSwic291cmNlUm9vdCI6IiJ9