!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){e.exports=React},function(e,t,n){},function(e,t,n){"use strict";function o(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),o(n(3)),o(n(4))},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);n(1);var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.componentDidMount=function(){this.forceUpdate()},t.prototype.render=function(){if(this.props.state.loading)return i.createElement("div",{className:"file-box"});var e="data:binary/octet-stream;base64,"+this.props.getContentValue(),t=this.props.getAttribute("Title")||"Download File",n="glyphicon glyphicon-"+(this.props.getAttribute("icon")||"envelope")+" icon-button",o={fontSize:(this.props.getAttribute("pointSize")||48)+"pt"};return i.createElement("div",{className:"file-box"},i.createElement("div",{className:"file-box-body"},i.createElement("a",{download:"firmware",href:e},i.createElement("span",{className:n,style:o,title:t}))))},t}(i.Component);manywho.component.register("FileDownloader",a),t.default=a},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);n(1);var a=n(5),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.componentDidMount=function(){this.forceUpdate(),manywho.state.setComponent(this.props.id,{objectData:this.props.getObjectData(this.props.model)},this.props.flowKey,!0)},t.prototype.render=function(){if(this.props.state.loading)return i.createElement("div",{className:"file-box"});manywho.model.getComponent(this.props.id,this.props.flowKey);var e=this.props.getObjectData(this.props.model)[0],t=e["File Name"],n=(e.Extension,e.Size,e.MimeType,"data:binary/octet-stream;base64,"+e.Content),o=this.props.getAttribute("title")||"Download File",r="glyphicon glyphicon-"+(this.props.getAttribute("icon")||"envelope")+" icon-button",a={fontSize:(this.props.getAttribute("pointSize")||48)+"pt"};return i.createElement("div",{className:"file-box"},i.createElement("div",{className:"file-box-body"},i.createElement("a",{download:t,href:n},i.createElement("span",{className:r,style:a,title:o}))))},t}(i.Component);manywho.component.register("file-download-complex",a.component(c)),t.default=c},function(e,t,n){"use strict";var o=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},i=this;Object.defineProperty(t,"__esModule",{value:!0});var a,c,u=n(0),p=n(6),l=n(7),s=function(e,t,n){var o=manywho.model.getItem(e,n),r=manywho.model.getOutcomes(e,n);return{className:manywho.styling.getClasses(t,e,o.componentType||o.containerType,n),flowKey:n,id:e,model:o,outcomes:r&&r.map(function(e){return u.createElement(manywho.component.getByName("outcome"),{id:e.id,flowKey:n})}),parentId:t}};t.container=function(e){return function(t){var n=t.id,i=t.parentId,c=t.flowKey,p=manywho.model.getContainer(n,c),f=manywho.model.getChildren(n,c),d=r({},s(n,i,c),{children:manywho.component.getChildComponents(f,n,c)});return manywho.log.debug(l(a||(a=o(["\n            Rendering Container\n            Name: ","\n            Type: ","\n            Order: ","\n        "],["\n            Rendering Container\n            Name: ","\n            Type: ","\n            Order: ","\n        "])),p.developerName,p.containerType,p.order)),u.createElement(e,d)}},t.component=function(e){return function(t){var n=t.id,a=t.parentId,f=t.flowKey,d=manywho.model.getComponent(n,f),m=r({},s(n,a,f),{getAttribute:function(e){if(d&&d.attributes){var t=Object.keys(d.attributes).filter(function(t){return manywho.utils.isEqual(t,e,!0)})[0];if(t)return d.attributes[t]}return null},getContentValue:function(){var e=manywho.state.getComponent(n,f);return e&&void 0!==e.contentValue?e.contentValue:d.contentValue},getObjectData:function(e){return e.objectData?e.objectData.map(function(e){return p.addProperties(e)}):null},onChange:function(e,t,o){if(void 0===t&&(t=!0),void 0===o&&(o=!0),manywho.state.setComponent(n,{contentValue:e},f,o),t){var r=manywho.state.getComponent(n,f);manywho.state.setComponent(n,manywho.validation.validate(d,r,f),f,o)}},onEvent:function(e){manywho.component.handleEvent(i,d,f,e)},state:manywho.state.getComponent(n,f)});return manywho.log.debug(l(c||(c=o(["\n            Rendering Component\n            Name: ","\n            Type: ","\n            Order: ","\n        "],["\n            Rendering Component\n            Name: ","\n            Type: ","\n            Order: ","\n        "])),d.developerName,d.componentType,d.order)),u.createElement(e,m)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=["developerName","externalId","internalId","properties","isSelected","order"];t.removeProperties=function(e){return e.map(function(e){return Object.keys(e).filter(function(e){return-1===o.indexOf(e)}).forEach(function(t){return delete e[t]}),e.properties&&(e.properties=e.properties.map(function(e){return e.objectData&&(e.objectData=t.removeProperties(e.objectData)),e})),e})},t.addProperties=function(e){return e.properties.forEach(function(n){e.hasOwnProperty(n.developerName)||Object.defineProperty(e,n.developerName,{configurable:!0,enumerable:!0,get:function(){return n.objectData?n.objectData.map(function(e){return t.addProperties(e)}):n.contentValue},set:function(e){Array.isArray(e)?n.objectData=t.removeProperties(e):null==e?(n.objectData=e,n.contentValue=e):n.contentValue=e}})}),e}},function(e,t,n){"use strict";e.exports=function(e){var t=void 0;t="string"==typeof e?[e]:e.raw;for(var n="",o=0;o<t.length;o++)n+=t[o].replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`"),o<(arguments.length<=1?0:arguments.length-1)&&(n+=arguments.length<=o+1?void 0:arguments[o+1]);var r=n.split("\n"),i=null;return r.forEach(function(e){var t=e.match(/^(\s+)\S+/);if(t){var n=t[1].length;i=i?Math.min(i,n):n}}),null!==i&&(n=r.map(function(e){return" "===e[0]?e.slice(i):e}).join("\n")),(n=n.trim()).replace(/\\n/g,"\n")}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiUmVhY3RcIiIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHN4Iiwid2VicGFjazovLy8uL3NyYy9maWxlLWRvd25sb2FkZXIudHN4Iiwid2VicGFjazovLy8uL3NyYy9maWxlLWRvd25sb2FkZXItY29tcGxleC50c3giLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzL3dyYXBwZXIudHN4Iiwid2VicGFjazovLy8uL3NyYy91dGlscy9vYmplY3REYXRhLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9kZWRlbnQvZGlzdC9kZWRlbnQuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJSZWFjdCIsIl9fZXhwb3J0IiwiRmlsZURvd25sb2FkZXIiLCJfc3VwZXIiLCJfX2V4dGVuZHMiLCJjb21wb25lbnREaWRNb3VudCIsInRoaXMiLCJmb3JjZVVwZGF0ZSIsInJlbmRlciIsInByb3BzIiwic3RhdGUiLCJsb2FkaW5nIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImRhdGFVcmkiLCJnZXRDb250ZW50VmFsdWUiLCJjYXB0aW9uIiwiZ2V0QXR0cmlidXRlIiwiaWNvblN0eWxlIiwiZm9udFNpemUiLCJkb3dubG9hZCIsImhyZWYiLCJzdHlsZSIsInRpdGxlIiwiQ29tcG9uZW50IiwibWFueXdobyIsImNvbXBvbmVudCIsInJlZ2lzdGVyIiwiZGVmYXVsdCIsIndyYXBwZXJfMSIsIkZpbGVEb3dubG9hZGVyQ29tcGxleCIsInNldENvbXBvbmVudCIsImlkIiwib2JqZWN0RGF0YSIsImdldE9iamVjdERhdGEiLCJtb2RlbCIsImZsb3dLZXkiLCJnZXRDb21wb25lbnQiLCJmaWxlTmFtZSIsIkV4dGVuc2lvbiIsIlNpemUiLCJNaW1lVHlwZSIsIkNvbnRlbnQiLCJfdGhpcyIsIm9iamVjdERhdGFfMSIsImRlZGVudCIsImdldFByb3BzIiwicGFyZW50SWQiLCJnZXRJdGVtIiwib3V0Y29tZXMiLCJnZXRPdXRjb21lcyIsInN0eWxpbmciLCJnZXRDbGFzc2VzIiwiY29tcG9uZW50VHlwZSIsImNvbnRhaW5lclR5cGUiLCJtYXAiLCJvdXRjb21lIiwiZ2V0QnlOYW1lIiwiY29udGFpbmVyIiwiQ29udGFpbmVyIiwiX2EiLCJnZXRDb250YWluZXIiLCJjaGlsZHJlbiIsImdldENoaWxkcmVuIiwiX19hc3NpZ24iLCJnZXRDaGlsZENvbXBvbmVudHMiLCJsb2ciLCJkZWJ1ZyIsInRlbXBsYXRlT2JqZWN0XzEiLCJfX21ha2VUZW1wbGF0ZU9iamVjdCIsImRldmVsb3Blck5hbWUiLCJvcmRlciIsImF0dHJpYnV0ZXMiLCJrZXlzIiwiZmlsdGVyIiwiaXRlbSIsInV0aWxzIiwiaXNFcXVhbCIsInVuZGVmaW5lZCIsImNvbnRlbnRWYWx1ZSIsImFkZFByb3BlcnRpZXMiLCJvbkNoYW5nZSIsInZhbGlkYXRlIiwicHVzaCIsInZhbGlkYXRpb24iLCJvbkV2ZW50IiwiY2FsbGJhY2siLCJoYW5kbGVFdmVudCIsInRlbXBsYXRlT2JqZWN0XzIiLCJvYmplY3REYXRhUHJvcGVydGllcyIsInJlbW92ZVByb3BlcnRpZXMiLCJpbmRleE9mIiwiZm9yRWFjaCIsInByb3BlcnRpZXMiLCJjb25maWd1cmFibGUiLCJzZXQiLCJuZXdWYWx1ZSIsIkFycmF5IiwiaXNBcnJheSIsInN0cmluZ3MiLCJyYXciLCJyZXN1bHQiLCJsZW5ndGgiLCJyZXBsYWNlIiwiYXJndW1lbnRzIiwibGluZXMiLCJzcGxpdCIsIm1pbmRlbnQiLCJtYXRjaCIsImluZGVudCIsIk1hdGgiLCJtaW4iLCJzbGljZSIsImpvaW4iLCJ0cmltIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxFQUFBLEdBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsR0FBQSxDQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFFBQUEsSUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsRUFBQSxDQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNBTixPQUFBQyxlQUFBYixFQUFBaUIsT0FBQUMsWUFBQSxDQUF3REMsTUFBQSxXQUV4RFAsT0FBQUMsZUFBQWIsRUFBQSxjQUFpRG1CLE9BQUEsS0FRakRyQixFQUFBc0IsRUFBQSxTQUFBRCxFQUFBRSxHQUVBLEdBREEsRUFBQUEsSUFBQUYsRUFBQXJCLEVBQUFxQixJQUNBLEVBQUFFLEVBQUEsT0FBQUYsRUFDQSxLQUFBRSxHQUFBLGlCQUFBRixRQUFBRyxXQUFBLE9BQUFILEVBQ0EsSUFBQUksRUFBQVgsT0FBQVksT0FBQSxNQUdBLEdBRkExQixFQUFBa0IsRUFBQU8sR0FDQVgsT0FBQUMsZUFBQVUsRUFBQSxXQUF5Q1QsWUFBQSxFQUFBSyxVQUN6QyxFQUFB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QUFBIiwiZmlsZSI6IkZpbGVEb3dubG9hZGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDIpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSBSZWFjdDsiLCJleHBvcnQgKiBmcm9tICcuL2ZpbGUtZG93bmxvYWRlcic7XG5leHBvcnQgKiBmcm9tICcuL2ZpbGUtZG93bmxvYWRlci1jb21wbGV4JztcbiIsIlxyXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCAnLi9maWxlLWRvd25sb2FkZXIuY3NzJztcclxuaW1wb3J0IHsgSUNvbXBvbmVudFByb3BzLCBJTWFueXdobyAgfSBmcm9tICcuL2ludGVyZmFjZXMnO1xyXG5pbXBvcnQgeyBjb21wb25lbnQgfSBmcm9tICcuL3V0aWxzL3dyYXBwZXInO1xyXG5cclxuZGVjbGFyZSBjb25zdCBtYW55d2hvOiBJTWFueXdobztcclxuXHJcbmNsYXNzIEZpbGVEb3dubG9hZGVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PElDb21wb25lbnRQcm9wcywgYW55PiB7XHJcblxyXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICAgICAgdGhpcy5mb3JjZVVwZGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuXHJcbiAgICAgaWYgKHRoaXMucHJvcHMuc3RhdGUubG9hZGluZykge1xyXG4gICAgICAgICAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJmaWxlLWJveFwiLz47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICBjb25zdCBkYXRhVXJpOiBzdHJpbmcgPSAnZGF0YTpiaW5hcnkvb2N0ZXQtc3RyZWFtO2Jhc2U2NCwnICsgdGhpcy5wcm9wcy5nZXRDb250ZW50VmFsdWUoKSBhcyBzdHJpbmc7XHJcblxyXG4gICAgIGNvbnN0IGNhcHRpb246IHN0cmluZyA9IHRoaXMucHJvcHMuZ2V0QXR0cmlidXRlKCdUaXRsZScpIGFzIHN0cmluZyB8fCAnRG93bmxvYWQgRmlsZSc7XHJcbiAgICAgY29uc3QgaWNvbjogc3RyaW5nID0gdGhpcy5wcm9wcy5nZXRBdHRyaWJ1dGUoJ2ljb24nKSBhcyBzdHJpbmcgfHwgJ2VudmVsb3BlJztcclxuICAgICBjb25zdCBjbGFzc05hbWU6IHN0cmluZyA9ICdnbHlwaGljb24gZ2x5cGhpY29uLScgKyBpY29uICsgJyBpY29uLWJ1dHRvbic7XHJcbiAgICAgY29uc3QgaWNvblNpemU6IG51bWJlciA9IHRoaXMucHJvcHMuZ2V0QXR0cmlidXRlKCdwb2ludFNpemUnKSBhcyBudW1iZXIgfHwgNDg7XHJcbiAgICAgY29uc3QgaWNvblN0eWxlOiBSZWFjdC5DU1NQcm9wZXJ0aWVzID0geyBmb250U2l6ZTogaWNvblNpemUgKyAncHQnIH07XHJcblxyXG4gICAgIHJldHVybiAoXHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmaWxlLWJveFwiID5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmaWxlLWJveC1ib2R5XCI+XHJcbiAgICAgICAgICAgICAgICA8YSBkb3dubG9hZD1cImZpcm13YXJlXCIgaHJlZj17ZGF0YVVyaX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtjbGFzc05hbWV9IHN0eWxlPXtpY29uU3R5bGV9IHRpdGxlPXtjYXB0aW9ufS8+XHJcbiAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5tYW55d2hvLmNvbXBvbmVudC5yZWdpc3RlcignRmlsZURvd25sb2FkZXInLCBGaWxlRG93bmxvYWRlcik7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGaWxlRG93bmxvYWRlcjtcclxuIiwiXHJcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0ICcuL2ZpbGUtZG93bmxvYWRlci5jc3MnO1xyXG5pbXBvcnQgeyBJQ29tcG9uZW50UHJvcHMsIElNYW55d2hvICB9IGZyb20gJy4vaW50ZXJmYWNlcyc7XHJcbmltcG9ydCB7IGNvbXBvbmVudCB9IGZyb20gJy4vdXRpbHMvd3JhcHBlcic7XHJcblxyXG5kZWNsYXJlIGNvbnN0IG1hbnl3aG86IElNYW55d2hvO1xyXG5cclxuY2xhc3MgRmlsZURvd25sb2FkZXJDb21wbGV4IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PElDb21wb25lbnRQcm9wcywgYW55PiB7XHJcblxyXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICAgICAgdGhpcy5mb3JjZVVwZGF0ZSgpO1xyXG4gICAgICAgIG1hbnl3aG8uc3RhdGUuc2V0Q29tcG9uZW50KHRoaXMucHJvcHMuaWQsIHtvYmplY3REYXRhOiB0aGlzLnByb3BzLmdldE9iamVjdERhdGEodGhpcy5wcm9wcy5tb2RlbCl9LCB0aGlzLnByb3BzLmZsb3dLZXksIHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBpZiAodGhpcy5wcm9wcy5zdGF0ZS5sb2FkaW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cImZpbGUtYm94XCIvPjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IG9sZE9EID0gbWFueXdoby5tb2RlbC5nZXRDb21wb25lbnQodGhpcy5wcm9wcy5pZCwgdGhpcy5wcm9wcy5mbG93S2V5KTtcclxuXHJcbiAgICAgICAgY29uc3Qgb2JqZWN0RGF0YSA9IHRoaXMucHJvcHMuZ2V0T2JqZWN0RGF0YSh0aGlzLnByb3BzLm1vZGVsKVswXTtcclxuICAgICAgICBjb25zdCBmaWxlTmFtZTogc3RyaW5nID0gb2JqZWN0RGF0YVsnRmlsZSBOYW1lJ10gYXMgc3RyaW5nO1xyXG4gICAgICAgIGNvbnN0IGV4dGVuc2lvbjogc3RyaW5nID0gb2JqZWN0RGF0YS5FeHRlbnNpb24gYXMgc3RyaW5nO1xyXG4gICAgICAgIGNvbnN0IHNpemU6IG51bWJlciA9IG9iamVjdERhdGEuU2l6ZSBhcyBudW1iZXI7XHJcbiAgICAgICAgY29uc3QgbWltZVR5cGU6IHN0cmluZyA9IG9iamVjdERhdGEuTWltZVR5cGUgYXMgc3RyaW5nO1xyXG5cclxuICAgICAgICBjb25zdCBkYXRhVXJpOiBzdHJpbmcgPSAnZGF0YTpiaW5hcnkvb2N0ZXQtc3RyZWFtO2Jhc2U2NCwnICsgb2JqZWN0RGF0YS5Db250ZW50IGFzIHN0cmluZztcclxuXHJcbiAgICAgICAgY29uc3QgY2FwdGlvbjogc3RyaW5nID0gdGhpcy5wcm9wcy5nZXRBdHRyaWJ1dGUoJ3RpdGxlJykgYXMgc3RyaW5nIHx8ICdEb3dubG9hZCBGaWxlJztcclxuICAgICAgICBjb25zdCBpY29uOiBzdHJpbmcgPSB0aGlzLnByb3BzLmdldEF0dHJpYnV0ZSgnaWNvbicpIGFzIHN0cmluZyB8fCAnZW52ZWxvcGUnO1xyXG4gICAgICAgIGNvbnN0IGNsYXNzTmFtZTogc3RyaW5nID0gJ2dseXBoaWNvbiBnbHlwaGljb24tJyArIGljb24gKyAnIGljb24tYnV0dG9uJztcclxuICAgICAgICBjb25zdCBpY29uU2l6ZTogbnVtYmVyID0gdGhpcy5wcm9wcy5nZXRBdHRyaWJ1dGUoJ3BvaW50U2l6ZScpIGFzIG51bWJlciB8fCA0ODtcclxuICAgICAgICBjb25zdCBpY29uU3R5bGU6IFJlYWN0LkNTU1Byb3BlcnRpZXMgPSB7IGZvbnRTaXplOiBpY29uU2l6ZSArICdwdCcgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZpbGUtYm94XCIgID5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmaWxlLWJveC1ib2R5XCI+XHJcbiAgICAgICAgICAgICAgICA8YSBkb3dubG9hZD17ZmlsZU5hbWV9IGhyZWY9e2RhdGFVcml9PlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17Y2xhc3NOYW1lfSBzdHlsZT17aWNvblN0eWxlfSB0aXRsZT17Y2FwdGlvbn0vPlxyXG4gICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxubWFueXdoby5jb21wb25lbnQucmVnaXN0ZXIoJ2ZpbGUtZG93bmxvYWQtY29tcGxleCcsIGNvbXBvbmVudChGaWxlRG93bmxvYWRlckNvbXBsZXgpKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZpbGVEb3dubG9hZGVyQ29tcGxleDtcclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtcbiAgICBJQ29tcG9uZW50SWRQcm9wcyxcbiAgICBJQ29tcG9uZW50TW9kZWwsXG4gICAgSUNvbXBvbmVudFByb3BzLFxuICAgIElDb250YWluZXJNb2RlbCxcbiAgICBJQ29udGFpbmVyUHJvcHMsXG4gICAgSU1hbnl3aG8sXG4gICAgSU9iamVjdERhdGEsXG59IGZyb20gJy4uL2ludGVyZmFjZXMnO1xuaW1wb3J0ICogYXMgU3RhdGUgZnJvbSAnLi4vaW50ZXJmYWNlcy9zZXJ2aWNlcy9zdGF0ZSc7XG5pbXBvcnQgeyBhZGRQcm9wZXJ0aWVzIH0gZnJvbSAnLi9vYmplY3REYXRhJztcbmltcG9ydCB7IG9iamVjdERhdGFIYW5kbGVyIH0gZnJvbSAnLi9wcm94eSc7XG5cbmNvbnN0IGRlZGVudDogYW55ID0gcmVxdWlyZSgnZGVkZW50Jyk7XG5cbmRlY2xhcmUgY29uc3QgbWFueXdobzogSU1hbnl3aG87XG5cbmNvbnN0IGdldFByb3BzID0gKGlkOiBzdHJpbmcsIHBhcmVudElkOiBzdHJpbmcsIGZsb3dLZXk6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IG1vZGVsID0gbWFueXdoby5tb2RlbC5nZXRJdGVtKGlkLCBmbG93S2V5KTtcbiAgICBjb25zdCBvdXRjb21lcyA9IG1hbnl3aG8ubW9kZWwuZ2V0T3V0Y29tZXMoaWQsIGZsb3dLZXkpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgY2xhc3NOYW1lOiBtYW55d2hvLnN0eWxpbmcuZ2V0Q2xhc3NlcyhwYXJlbnRJZCwgaWQsIG1vZGVsLmNvbXBvbmVudFR5cGUgfHwgbW9kZWwuY29udGFpbmVyVHlwZSwgZmxvd0tleSksXG4gICAgICAgIGZsb3dLZXksXG4gICAgICAgIGlkLFxuICAgICAgICBtb2RlbCxcbiAgICAgICAgb3V0Y29tZXM6IG91dGNvbWVzICYmIG91dGNvbWVzXG4gICAgICAgICAgICAubWFwKChvdXRjb21lKSA9PiBSZWFjdC5jcmVhdGVFbGVtZW50KG1hbnl3aG8uY29tcG9uZW50LmdldEJ5TmFtZSgnb3V0Y29tZScpLCB7IGlkOiBvdXRjb21lLmlkLCBmbG93S2V5fSkpLFxuICAgICAgICBwYXJlbnRJZCxcbiAgICB9O1xufTtcblxuZXhwb3J0IGNvbnN0IGNvbnRhaW5lciA9IChcbiAgICBDb250YWluZXI6IFJlYWN0LkNvbXBvbmVudENsYXNzPElDb250YWluZXJQcm9wcz4gfCBSZWFjdC5GdW5jdGlvbkNvbXBvbmVudDxJQ29udGFpbmVyUHJvcHM+LFxuKSA9PiB7XG4gICAgcmV0dXJuICh7IGlkLCBwYXJlbnRJZCwgZmxvd0tleSB9OiBJQ29tcG9uZW50SWRQcm9wcykgPT4ge1xuICAgICAgICBjb25zdCBtb2RlbDogSUNvbnRhaW5lck1vZGVsID0gbWFueXdoby5tb2RlbC5nZXRDb250YWluZXIoaWQsIGZsb3dLZXkpO1xuICAgICAgICBjb25zdCBjaGlsZHJlbiA9IG1hbnl3aG8ubW9kZWwuZ2V0Q2hpbGRyZW4oaWQsIGZsb3dLZXkpO1xuXG4gICAgICAgIGNvbnN0IHByb3BzOiBJQ29udGFpbmVyUHJvcHMgPSB7XG4gICAgICAgICAgICAuLi5nZXRQcm9wcyhpZCwgcGFyZW50SWQsIGZsb3dLZXkpLFxuICAgICAgICAgICAgY2hpbGRyZW46IG1hbnl3aG8uY29tcG9uZW50LmdldENoaWxkQ29tcG9uZW50cyhjaGlsZHJlbiwgaWQsIGZsb3dLZXkpLFxuICAgICAgICB9O1xuXG4gICAgICAgIG1hbnl3aG8ubG9nLmRlYnVnKGRlZGVudGBcbiAgICAgICAgICAgIFJlbmRlcmluZyBDb250YWluZXJcbiAgICAgICAgICAgIE5hbWU6ICR7bW9kZWwuZGV2ZWxvcGVyTmFtZX1cbiAgICAgICAgICAgIFR5cGU6ICR7bW9kZWwuY29udGFpbmVyVHlwZX1cbiAgICAgICAgICAgIE9yZGVyOiAke21vZGVsLm9yZGVyfVxuICAgICAgICBgKTtcblxuICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChDb250YWluZXIsIHByb3BzKTtcbiAgICB9O1xufTtcblxuZXhwb3J0IGNvbnN0IGNvbXBvbmVudCA9IChcbiAgICBDb21wb25lbnQ6IFJlYWN0LkNvbXBvbmVudENsYXNzPElDb21wb25lbnRQcm9wcz4gfCBSZWFjdC5GdW5jdGlvbkNvbXBvbmVudDxJQ29tcG9uZW50UHJvcHM+LFxuKSA9PiB7XG4gICAgcmV0dXJuICh7IGlkLCBwYXJlbnRJZCwgZmxvd0tleSB9OiBJQ29tcG9uZW50SWRQcm9wcykgPT4ge1xuICAgICAgICBjb25zdCBtb2RlbDogSUNvbXBvbmVudE1vZGVsID0gbWFueXdoby5tb2RlbC5nZXRDb21wb25lbnQoaWQsIGZsb3dLZXkpO1xuXG4gICAgICAgIGNvbnN0IG9uQ2hhbmdlID0gKHZhbHVlOiBzdHJpbmcgfCBudW1iZXIgfCBib29sZWFuIHwgbnVsbCwgdmFsaWRhdGU6IGJvb2xlYW4gPSB0cnVlLCBwdXNoOiBib29sZWFuID0gdHJ1ZSkgPT4ge1xuICAgICAgICAgICAgbWFueXdoby5zdGF0ZS5zZXRDb21wb25lbnQoaWQsIHsgY29udGVudFZhbHVlOiB2YWx1ZSB9LCBmbG93S2V5LCBwdXNoKTtcblxuICAgICAgICAgICAgaWYgKHZhbGlkYXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSBtYW55d2hvLnN0YXRlLmdldENvbXBvbmVudChpZCwgZmxvd0tleSk7XG4gICAgICAgICAgICAgICAgbWFueXdoby5zdGF0ZS5zZXRDb21wb25lbnQoXG4gICAgICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgICAgICBtYW55d2hvLnZhbGlkYXRpb24udmFsaWRhdGUobW9kZWwsIHN0YXRlLCBmbG93S2V5KSxcbiAgICAgICAgICAgICAgICAgICAgZmxvd0tleSxcbiAgICAgICAgICAgICAgICAgICAgcHVzaCxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IG9uRXZlbnQgPSAoY2FsbGJhY2s/OiAoKSA9PiB2b2lkKSA9PiB7XG4gICAgICAgICAgICBtYW55d2hvLmNvbXBvbmVudC5oYW5kbGVFdmVudChcbiAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgIG1vZGVsLFxuICAgICAgICAgICAgICAgIGZsb3dLZXksXG4gICAgICAgICAgICAgICAgY2FsbGJhY2ssXG4gICAgICAgICAgICApO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGdldENvbnRlbnRWYWx1ZSA9IDxUIGV4dGVuZHMgc3RyaW5nIHwgbnVtYmVyIHwgYm9vbGVhbj4oKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzdGF0ZSA9IG1hbnl3aG8uc3RhdGUuZ2V0Q29tcG9uZW50KGlkLCBmbG93S2V5KTtcblxuICAgICAgICAgICAgcmV0dXJuIChzdGF0ZSAmJiBzdGF0ZS5jb250ZW50VmFsdWUgIT09IHVuZGVmaW5lZCA/XG4gICAgICAgICAgICAgICAgc3RhdGUuY29udGVudFZhbHVlIDpcbiAgICAgICAgICAgICAgICBtb2RlbC5jb250ZW50VmFsdWUpIGFzIFQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgZ2V0T2JqZWN0RGF0YSA9IChpdGVtOiBhbnkpOiBhbnlbXSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gaXRlbS5vYmplY3REYXRhID9cbiAgICAgICAgICAgICAgICBpdGVtLm9iamVjdERhdGEubWFwKChvYmplY3REYXRhOiBJT2JqZWN0RGF0YSkgPT4gYWRkUHJvcGVydGllcyhvYmplY3REYXRhKSlcbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgZ2V0QXR0cmlidXRlID0gKG5hbWU6IHN0cmluZyk6IHN0cmluZyB8IG51bWJlciB8IGJvb2xlYW4gfCBudWxsID0+IHtcbiAgICAgICAgICAgIGlmIChtb2RlbCAmJiBtb2RlbC5hdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gT2JqZWN0XG4gICAgICAgICAgICAgICAgICAgIC5rZXlzKG1vZGVsLmF0dHJpYnV0ZXMpXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoKGl0ZW0pID0+IG1hbnl3aG8udXRpbHMuaXNFcXVhbChpdGVtLCBuYW1lLCB0cnVlKSlbMF07XG5cbiAgICAgICAgICAgICAgICBpZiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtb2RlbC5hdHRyaWJ1dGVzW2tleV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBwcm9wczogSUNvbXBvbmVudFByb3BzID0ge1xuICAgICAgICAgICAgLi4uZ2V0UHJvcHMoaWQsIHBhcmVudElkLCBmbG93S2V5KSxcbiAgICAgICAgICAgIGdldEF0dHJpYnV0ZSxcbiAgICAgICAgICAgIGdldENvbnRlbnRWYWx1ZSxcbiAgICAgICAgICAgIGdldE9iamVjdERhdGEsXG4gICAgICAgICAgICBvbkNoYW5nZSxcbiAgICAgICAgICAgIG9uRXZlbnQsXG4gICAgICAgICAgICBzdGF0ZTogbWFueXdoby5zdGF0ZS5nZXRDb21wb25lbnQoaWQsIGZsb3dLZXkpLFxuICAgICAgICB9O1xuXG4gICAgICAgIG1hbnl3aG8ubG9nLmRlYnVnKGRlZGVudGBcbiAgICAgICAgICAgIFJlbmRlcmluZyBDb21wb25lbnRcbiAgICAgICAgICAgIE5hbWU6ICR7bW9kZWwuZGV2ZWxvcGVyTmFtZX1cbiAgICAgICAgICAgIFR5cGU6ICR7bW9kZWwuY29tcG9uZW50VHlwZX1cbiAgICAgICAgICAgIE9yZGVyOiAke21vZGVsLm9yZGVyfVxuICAgICAgICBgKTtcblxuICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChDb21wb25lbnQsIHByb3BzKTtcbiAgICB9O1xufTtcbiIsImltcG9ydCB7IElPYmplY3REYXRhLCBJT2JqZWN0RGF0YVByb3BlcnR5IH0gZnJvbSAnLi4vaW50ZXJmYWNlcyc7XG5cbmNvbnN0IG9iamVjdERhdGFQcm9wZXJ0aWVzID0gWydkZXZlbG9wZXJOYW1lJywgJ2V4dGVybmFsSWQnLCAnaW50ZXJuYWxJZCcsICdwcm9wZXJ0aWVzJywgJ2lzU2VsZWN0ZWQnLCAnb3JkZXInXTtcblxuZXhwb3J0IGNvbnN0IHJlbW92ZVByb3BlcnRpZXMgPSAob2JqZWN0RGF0YTogYW55W10pOiBJT2JqZWN0RGF0YVtdID0+IHtcbiAgICByZXR1cm4gb2JqZWN0RGF0YS5tYXAoKGl0ZW06IGFueSkgPT4ge1xuICAgICAgICBPYmplY3Qua2V5cyhpdGVtKVxuICAgICAgICAgICAgLmZpbHRlcigoa2V5OiBzdHJpbmcpID0+IG9iamVjdERhdGFQcm9wZXJ0aWVzLmluZGV4T2Yoa2V5KSA9PT0gLTEpXG4gICAgICAgICAgICAuZm9yRWFjaCgoa2V5OiBzdHJpbmcpID0+IGRlbGV0ZSBpdGVtW2tleV0pO1xuXG4gICAgICAgIGlmIChpdGVtLnByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGl0ZW0ucHJvcGVydGllcyA9IGl0ZW0ucHJvcGVydGllcy5tYXAoKHByb3BlcnR5OiBJT2JqZWN0RGF0YVByb3BlcnR5KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnR5Lm9iamVjdERhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydHkub2JqZWN0RGF0YSA9IHJlbW92ZVByb3BlcnRpZXMocHJvcGVydHkub2JqZWN0RGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBwcm9wZXJ0eTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgfSk7XG59O1xuXG5leHBvcnQgY29uc3QgYWRkUHJvcGVydGllcyA9IChvYmplY3REYXRhOiBJT2JqZWN0RGF0YSk6IElPYmplY3REYXRhID0+IHtcbiAgICBvYmplY3REYXRhLnByb3BlcnRpZXMuZm9yRWFjaCgocHJvcGVydHkpID0+IHtcblxuICAgICAgICBpZiAoIW9iamVjdERhdGEuaGFzT3duUHJvcGVydHkocHJvcGVydHkuZGV2ZWxvcGVyTmFtZSkpIHtcblxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iamVjdERhdGEsIHByb3BlcnR5LmRldmVsb3Blck5hbWUsIHtcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBnZXQ6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnR5Lm9iamVjdERhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9wZXJ0eS5vYmplY3REYXRhLm1hcCgoaXRlbTogSU9iamVjdERhdGEpID0+IGFkZFByb3BlcnRpZXMoaXRlbSkpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByb3BlcnR5LmNvbnRlbnRWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc2V0OiAobmV3VmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobmV3VmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eS5vYmplY3REYXRhID0gcmVtb3ZlUHJvcGVydGllcyhuZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobmV3VmFsdWUgPT09IG51bGwgfHwgbmV3VmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHkub2JqZWN0RGF0YSA9IG5ld1ZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHkuY29udGVudFZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eS5jb250ZW50VmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIG9iamVjdERhdGE7XG59O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmZ1bmN0aW9uIGRlZGVudChzdHJpbmdzKSB7XG5cbiAgdmFyIHJhdyA9IHZvaWQgMDtcbiAgaWYgKHR5cGVvZiBzdHJpbmdzID09PSBcInN0cmluZ1wiKSB7XG4gICAgLy8gZGVkZW50IGNhbiBiZSB1c2VkIGFzIGEgcGxhaW4gZnVuY3Rpb25cbiAgICByYXcgPSBbc3RyaW5nc107XG4gIH0gZWxzZSB7XG4gICAgcmF3ID0gc3RyaW5ncy5yYXc7XG4gIH1cblxuICAvLyBmaXJzdCwgcGVyZm9ybSBpbnRlcnBvbGF0aW9uXG4gIHZhciByZXN1bHQgPSBcIlwiO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHJhdy5sZW5ndGg7IGkrKykge1xuICAgIHJlc3VsdCArPSByYXdbaV0uXG4gICAgLy8gam9pbiBsaW5lcyB3aGVuIHRoZXJlIGlzIGEgc3VwcHJlc3NlZCBuZXdsaW5lXG4gICAgcmVwbGFjZSgvXFxcXFxcblsgXFx0XSovZywgXCJcIikuXG5cbiAgICAvLyBoYW5kbGUgZXNjYXBlZCBiYWNrdGlja3NcbiAgICByZXBsYWNlKC9cXFxcYC9nLCBcImBcIik7XG5cbiAgICBpZiAoaSA8IChhcmd1bWVudHMubGVuZ3RoIDw9IDEgPyAwIDogYXJndW1lbnRzLmxlbmd0aCAtIDEpKSB7XG4gICAgICByZXN1bHQgKz0gYXJndW1lbnRzLmxlbmd0aCA8PSBpICsgMSA/IHVuZGVmaW5lZCA6IGFyZ3VtZW50c1tpICsgMV07XG4gICAgfVxuICB9XG5cbiAgLy8gbm93IHN0cmlwIGluZGVudGF0aW9uXG4gIHZhciBsaW5lcyA9IHJlc3VsdC5zcGxpdChcIlxcblwiKTtcbiAgdmFyIG1pbmRlbnQgPSBudWxsO1xuICBsaW5lcy5mb3JFYWNoKGZ1bmN0aW9uIChsKSB7XG4gICAgdmFyIG0gPSBsLm1hdGNoKC9eKFxccyspXFxTKy8pO1xuICAgIGlmIChtKSB7XG4gICAgICB2YXIgaW5kZW50ID0gbVsxXS5sZW5ndGg7XG4gICAgICBpZiAoIW1pbmRlbnQpIHtcbiAgICAgICAgLy8gdGhpcyBpcyB0aGUgZmlyc3QgaW5kZW50ZWQgbGluZVxuICAgICAgICBtaW5kZW50ID0gaW5kZW50O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWluZGVudCA9IE1hdGgubWluKG1pbmRlbnQsIGluZGVudCk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICBpZiAobWluZGVudCAhPT0gbnVsbCkge1xuICAgIHJlc3VsdCA9IGxpbmVzLm1hcChmdW5jdGlvbiAobCkge1xuICAgICAgcmV0dXJuIGxbMF0gPT09IFwiIFwiID8gbC5zbGljZShtaW5kZW50KSA6IGw7XG4gICAgfSkuam9pbihcIlxcblwiKTtcbiAgfVxuXG4gIC8vIGRlZGVudCBlYXRzIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRlc3BhY2UgdG9vXG4gIHJlc3VsdCA9IHJlc3VsdC50cmltKCk7XG5cbiAgLy8gaGFuZGxlIGVzY2FwZWQgbmV3bGluZXMgYXQgdGhlIGVuZCB0byBlbnN1cmUgdGhleSBkb24ndCBnZXQgc3RyaXBwZWQgdG9vXG4gIHJldHVybiByZXN1bHQucmVwbGFjZSgvXFxcXG4vZywgXCJcXG5cIik7XG59XG5cbmlmICh0eXBlb2YgbW9kdWxlICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gZGVkZW50O1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==